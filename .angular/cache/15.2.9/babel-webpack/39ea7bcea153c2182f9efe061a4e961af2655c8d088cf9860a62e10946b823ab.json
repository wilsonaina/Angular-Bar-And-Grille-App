{"ast":null,"code":"var _class;\nimport { Observable } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport class CartService {\n  constructor() {\n    this.cart = [];\n    this.localStorageCart = [];\n    this.updatedCart = [];\n  }\n  addToCart(product) {\n    return new Observable(subscriber => {\n      if (product) {\n        // Check if customer has items in cart session\n        if (localStorage.getItem('customer_cart')) {\n          this.cart = JSON.parse(localStorage.getItem('customer_cart') || '{}');\n          if (this.cart.filter(cartItem => cartItem === product)) {\n            console.log('product is already in the cart');\n          } else {\n            console.log('This is a new product added');\n          }\n          this.cart.push(product);\n          // Set the cart object with the newly added product\n          localStorage.setItem('customer_cart', JSON.stringify(this.cart));\n          subscriber.next();\n          subscriber.complete();\n        } else {\n          this.cart.push(product);\n          localStorage.setItem('customer_cart', JSON.stringify(this.cart));\n          subscriber.next();\n          subscriber.complete();\n        }\n      }\n    });\n  }\n  getCartProductsFromLocaleStorage() {\n    return new Observable(subscriber => {\n      if (localStorage && localStorage.getItem('customer_cart')) {\n        const customerCart = JSON.parse(localStorage.getItem('customer_cart') || '{}');\n        subscriber.next(customerCart);\n        subscriber.complete();\n      } else {\n        const error = `There's no items in the cart`;\n        subscriber.error(error);\n        subscriber.complete();\n      }\n    });\n  }\n  getCartItemCount() {\n    return new Observable(subscriber => {\n      this.cart = JSON.parse(localStorage.getItem('customer_cart') || '{}');\n      if (this.cart && this.cart.length) {\n        subscriber.next(this.cart.length);\n        subscriber.complete();\n      } else {\n        const error = 'Count cart is 0';\n        subscriber.error(error);\n        subscriber.complete();\n      }\n    });\n  }\n  clearCart() {}\n  removeCartItem(sku, index) {\n    return new Observable(subscriber => {\n      this.cart = JSON.parse(localStorage.getItem('customer_cart') || '{}');\n      if (this.cart) {\n        this.cart.splice(index, 1);\n        // Set the cart object without the remove cart item\n        localStorage.setItem('customer_cart', JSON.stringify(this.cart));\n        subscriber.next(this.cart);\n        subscriber.complete();\n      } else {\n        subscriber.error('No items to remove in cart');\n        subscriber.complete();\n      }\n    });\n  }\n}\n_class = CartService;\n_class.ɵfac = function CartService_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"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","names":["Observable","CartService","constructor","addToCart","product","subscriber","localStorage","getItem","cart","JSON","parse","filter","cartItem","console","log","push","setItem","stringify","next","complete","getCartProductsFromLocaleStorage","customerCart","error","getCartItemCount","length","clearCart","removeCartItem","sku","index","splice","factory","providedIn"],"sourceRoot":"","sources":["/Users/MrWilson/Desktop/Angular_Apps/sundays_bar_and_grille_app/src/app/shared/services/cart/cart.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Product } from '../../models/product.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CartService {\n  cart: any[] = [];\n  localStorageCart: any[] = [];\n  updatedCart: any[] = [];\n\n  constructor() {\n  }\n\n  addToCart(product: Product): Observable<any> {\n    return new Observable((subscriber) => {\n      if (product) {\n        // Check if customer has items in cart session\n        if (localStorage.getItem('customer_cart')) {\n          this.cart = JSON.parse(localStorage.getItem('customer_cart') || '{}');\n\n          if(this.cart.filter((cartItem) => cartItem === product)) {\n            console.log('product is already in the cart');\n          } else {\n            console.log('This is a new product added');\n          }\n          \n          this.cart.push(product);\n          // Set the cart object with the newly added product\n          localStorage.setItem('customer_cart', JSON.stringify(this.cart));\n          subscriber.next();\n          subscriber.complete();\n        } else {\n          this.cart.push(product);\n          localStorage.setItem('customer_cart', JSON.stringify(this.cart));\n          subscriber.next();\n          subscriber.complete();\n        }\n      }\n    })\n  }\n\n  getCartProductsFromLocaleStorage(): Observable<any> {\n    return new Observable((subscriber) => {\n      if (localStorage && localStorage.getItem('customer_cart')) {\n        const customerCart = JSON.parse(localStorage.getItem('customer_cart') || '{}');\n        subscriber.next(customerCart);\n        subscriber.complete();\n      } else {\n        const error = `There's no items in the cart`;\n        subscriber.error(error);\n        subscriber.complete();\n      }\n    });\n  }\n\n  getCartItemCount(): Observable<number> {\n    return new Observable<number>((subscriber) => {\n      this.cart = JSON.parse(localStorage.getItem('customer_cart') || '{}');\n      if (this.cart && this.cart.length) {\n        subscriber.next(this.cart.length);\n        subscriber.complete();\n      } else {\n        const error = 'Count cart is 0';\n        subscriber.error(error);\n        subscriber.complete();\n      }\n    });\n  }\n\n  clearCart() {}\n\n  removeCartItem(sku: string, index: number): Observable<any> {\n    return new Observable((subscriber) => {\n      this.cart = JSON.parse(localStorage.getItem('customer_cart') || '{}');\n      if (this.cart) {\n        this.cart.splice(index, 1);\n        // Set the cart object without the remove cart item\n        localStorage.setItem('customer_cart', JSON.stringify(this.cart));\n        subscriber.next(this.cart);\n        subscriber.complete();\n      } else {\n        subscriber.error('No items to remove in cart');\n        subscriber.complete();\n      }\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}