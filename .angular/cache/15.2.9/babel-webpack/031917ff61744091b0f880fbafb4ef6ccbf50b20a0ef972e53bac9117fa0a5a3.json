{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet HomePageComponent = class HomePageComponent {\n  constructor(productsService, cartService, cdr) {\n    this.productsService = productsService;\n    this.cartService = cartService;\n    this.cdr = cdr;\n    this.products = [];\n    this.drinks = [];\n    this.sides = [];\n    this.entrees = [];\n    this.displaySuccessAlert = false;\n    this.cartHasProducts = false;\n  }\n  ngOnInit() {\n    this.getProducts();\n    this.getCartProducts();\n    this.getCountItemCount();\n  }\n  getProducts() {\n    this.productsService.getProducts().subscribe(product => {\n      Object.keys(product).forEach(key => {\n        this.products.push(product[key]);\n      });\n      // Returns entree products\n      this.entrees = this.products.filter(product => product.category === 'entree');\n      // Returns entree products\n      this.sides = this.products.filter(product => product.category === 'sides');\n      // Returns entree products\n      this.drinks = this.products.filter(product => product.category === 'drinks');\n    });\n  }\n  addProductToCart(product) {\n    this.cartService.addToCart(product).subscribe({\n      next: () => {\n        this.getCartProducts();\n        this.cartProductTitle = product.title;\n        this.displaySuccessAlert = true;\n        this.windowScrollToTop();\n        this.getCountItemCount();\n        console.log(`${JSON.stringify(product)} was successfully added to the cart`);\n      },\n      error: error => {\n        console.log(`There was an error adding product to cart: ${error}`);\n      }\n    });\n  }\n  getCartProducts() {\n    this.cartService.getCartProductsFromLocaleStorage().subscribe({\n      next: customerCart => {\n        if (customerCart.length) {\n          this.cartItems = customerCart;\n          this.cartHasProducts = true;\n        } else {\n          this.cartHasProducts = false;\n        }\n      },\n      error: error => console.log(error)\n    });\n  }\n  windowScrollToTop() {\n    window.scroll({\n      top: 0,\n      left: 0,\n      behavior: 'smooth'\n    });\n  }\n  toggleDisplaySuccessAlert() {\n    if (this.displaySuccessAlert) {\n      this.displaySuccessAlert = false;\n    }\n  }\n  getCountItemCount() {\n    this.cartService.getCartItemCount().subscribe({\n      next: cartItemCount => {\n        this.cartItemCount = cartItemCount;\n      },\n      error: error => console.log(`There was an error: ${error}`)\n    });\n  }\n  removeCartItem(sku, index) {\n    this.cartService.removeCartItem(sku, index).subscribe({\n      next: val => {\n        // Refresh the cart\n        if (val) {\n          this.getCartProducts();\n          this.getCountItemCount();\n        } else {\n          this.cartHasProducts = false;\n        }\n      },\n      error: error => console.log(error)\n    });\n  }\n  removeAllItems() {\n    this.cartService.clearCart().subscribe(res => {\n      this.cartHasProducts = false;\n      this.getCountItemCount();\n    });\n  }\n};\nHomePageComponent = __decorate([Component({\n  selector: 'app-home-page',\n  templateUrl: './home-page.component.html',\n  styleUrls: ['./home-page.component.scss']\n})], HomePageComponent);\nexport { HomePageComponent };","map":{"version":3,"mappings":"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","names":["Component","HomePageComponent","constructor","productsService","cartService","cdr","ngOnInit","getProducts","getCartProducts","getCountItemCount","subscribe","product","Object","keys","forEach","key","products","push","entrees","filter","category","sides","drinks","addProductToCart","addToCart","next","cartProductTitle","title","displaySuccessAlert","windowScrollToTop","console","log","JSON","stringify","error","getCartProductsFromLocaleStorage","customerCart","length","cartItems","cartHasProducts","window","scroll","top","left","behavior","toggleDisplaySuccessAlert","getCartItemCount","cartItemCount","removeCartItem","sku","index","val","removeAllItems","clearCart","res","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/Users/MrWilson/Desktop/Angular_Apps/sundays_bar_and_grille_app/src/app/features/home-page/components/home-page.component.ts"],"sourcesContent":["import {ChangeDetectorRef, Component, OnInit} from '@angular/core';\nimport {Product} from \"../../../shared/models/product.model\";\nimport {ProductsService} from \"../../../shared/services/products/products.service\";\nimport {CartService} from \"../../../shared/services/cart/cart.service\";\nimport {error} from \"@angular/compiler-cli/src/transformers/util\";\nimport {CartItemModel} from \"../../../shared/models/cart-item.model\";\n\n@Component({\n  selector: 'app-home-page',\n  templateUrl: './home-page.component.html',\n  styleUrls: ['./home-page.component.scss']\n})\nexport class HomePageComponent implements OnInit {\n  products: Product[] = [];\n  drinks: any[] = [];\n  sides: any[] = [];\n  entrees: any[] = [];\n  displaySuccessAlert: boolean = false;\n  cartHasProducts: boolean = false;\n  cartProductTitle: string;\n  cartItems: Product[];\n  cartItemCount: number;\n\n  constructor(\n    private productsService: ProductsService,\n    private cartService: CartService,\n    private cdr: ChangeDetectorRef) {\n  }\n\n  ngOnInit(): void {\n    this.getProducts();\n    this.getCartProducts();\n    this.getCountItemCount();\n  }\n\n  getProducts() {\n    this.productsService.getProducts().subscribe((product) => {\n      Object.keys(product).forEach(key => {\n        this.products.push(product[key]);\n      });\n      // Returns entree products\n      this.entrees = this.products\n        .filter((product) => product.category === 'entree');\n      // Returns entree products\n      this.sides = this.products\n        .filter((product) => product.category === 'sides');\n      // Returns entree products\n      this.drinks = this.products\n        .filter((product) => product.category === 'drinks');\n    });\n  }\n\n  addProductToCart(product: Product) {\n    this.cartService.addToCart(product).subscribe({\n      next: () => {\n        this.getCartProducts();\n        this.cartProductTitle = product.title;\n        this.displaySuccessAlert = true;\n        this.windowScrollToTop();\n        this.getCountItemCount();\n        console.log(`${JSON.stringify(product)} was successfully added to the cart`);\n      },\n      error: (error) => {\n        console.log(`There was an error adding product to cart: ${error}`);\n      }\n    });\n  }\n\n  getCartProducts() {\n    this.cartService.getCartProductsFromLocaleStorage().subscribe({\n      next: (customerCart) => {\n        if (customerCart.length) {\n          this.cartItems = customerCart;\n          this.cartHasProducts = true;\n        } else {\n          this.cartHasProducts = false;\n        }\n      },\n      error: (error) => console.log(error)\n    })\n  }\n\n  windowScrollToTop() {\n    window.scroll({\n      top: 0,\n      left: 0,\n      behavior: 'smooth'\n    });\n  }\n\n  toggleDisplaySuccessAlert() {\n    if (this.displaySuccessAlert) {\n      this.displaySuccessAlert = false;\n    }\n  }\n\n  getCountItemCount() {\n    this.cartService.getCartItemCount().subscribe({\n      next: (cartItemCount) => {\n        this.cartItemCount = cartItemCount\n      },\n      error: (error) => console.log(`There was an error: ${error}`)\n    });\n  }\n\n  removeCartItem(sku: string, index: number) {\n    this.cartService.removeCartItem(sku, index).subscribe({\n      next: (val) => {\n        // Refresh the cart\n        if (val) {\n          this.getCartProducts();\n          this.getCountItemCount();\n        } else {\n          this.cartHasProducts = false;\n        }\n      },\n      error: (error) => console.log(error)\n    });\n  }\n\n  removeAllItems() {\n    this.cartService.clearCart().subscribe((res) => {\n      this.cartHasProducts = false;\n      this.getCountItemCount();\n    })\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}